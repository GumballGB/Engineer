#include <Servo.h>
Servo leftservo;  // Servo Name
Servo rightservo; // Servo Name
const int pingPin = 5; // Trigger Pin of Ultrasonic Sensor
const int echoPin = 6; // Echo Pin of Ultrasonic Sensor
double distance;

void StaterFuel() //This function identities the pins
{
  leftservo.attach(9);  
  rightservo.attach(10);
  //set up the Serial
  Serial.begin(9600);
  //setupt the pin modes  
  pinMode(pingPin, OUTPUT);
  pinMode(echoPin, INPUT);
  leftservo.write(90);
  rightservo.write(90);
  Serial.println("Engine Ready");
}

void Mileage() //This function sets up duration
{
  double duration;  
  digitalWrite(pingPin, LOW);
  delayMicroseconds(2); //send the 10 microsecond trigger
  digitalWrite(pingPin, HIGH);
  delayMicroseconds(10);
  digitalWrite(pingPin, LOW); //get the pulse duration in microseconds
  duration = pulseIn(echoPin, HIGH); 
  distance = (duration*0.034/2); //converts duration to time
}

void Scan() //This function actively scans
{
  while (distance > 2000) {
    Mileage();
    leftservo.write(60);
    rightservo.write(60);
    delay(400);
    /*
    leftservo.write(90);
    rightservo.write(90);
    delay(1000);
    */
    
    if (distance > 2000)
    {
      leftservo.write(120);
      rightservo.write(120);
      delay(300);
      leftservo.write(120);
      rightservo.write(60);
      delay(600);
    }
  }
}

void Snake() //This function will move the robot like a snake once it detects a wall
{
  while(distance < 200) 
  {
    if (distance > 60) 
    { 
      Mileage();
      //
      leftservo.write(80);
      rightservo.write(70);
      //scan()
      delay(25);
    }
    else if (distance < 60) 
    { 
      Mileage();
      //
      leftservo.write(130);
      rightservo.write(80);
      delay(25);
    }
  }
}

void setup(){
  
  }


void loop() 
{
  
  StaterFuel();
  Mileage();
  Serial.println(String(distance));
  //
  if (distance < 200)
  {
    Snake();
  }
  else if (distance > 2000)
  {
    Scan();
  }
  
}  
